{{ define "main" }}

  <script>
  var banner = [
        '     _    _         _   _____                _                                  _   _ _____ _     _        _    _     ',
        '    / \\  | |__   __| | | ____|_ __ _ __ __ _| |__  _ __ ___   __ _ _ __   ___  | | | | ____| |   | |      / \\  | |    ',
        "   / _ \\ | '_ \\ / _` | |  _| | '__| '__/ _` | '_ \\| '_ ` _ \\ / _` | '_ \\ / _ \\ | |_| |  _| | |   | |     / _ \\ | |    ",
        '  / ___ \\| |_) | (_| | | |___| |  | | | (_| | | | | | | | | | (_| | | | |  __/ |  _  | |___| |___| |___ / ___ \\| |___ ',
        ' /_/   \\_\\_.__/ \\__,_| |_____|_|  |_|  \\__,_|_| |_|_| |_| |_|\\__,_|_| |_|\\___| |_| |_|_____|_____|_____/_/   \\_\\_____|'
    ];
  var help = [
        '[[b;#fff;]posts]   see all blog posts',
        
    ];  

/*
<form action="https://send.pageclip.co/DPHSqmIHlFNQGo7kTVPJTsT17ZhFBXPa/contact" class="pageclip-form" method="post">

  <input type="email" name="email"  />
  <input type="text" name="subject"  />

  <button type="submit" class="pageclip-form__submit">
    <span>Send</span>
  </button>
</form>
*/
  var term = $('body').terminal({
      contact: function() {


        var spec = [
            {
                type: $.terminal.forms.types.input,
                message: '\nWhat is your name?',
                prompt: 'name: ',
                name: 'name'
            },
            {
                type: $.terminal.forms.types.input,
                message: '\nWhat is your email?',
                prompt: 'email: ',
                name: 'email'
            },
            {
                type: $.terminal.forms.types.input,
                message: '\nWhat is your subject?',
                prompt: 'subject: ',
                name: 'subject'
            }
        ];
         $.terminal.forms.form(term, spec).then(form => {
            var contact = '<form id="contact-form" action="https://send.pageclip.co/DPHSqmIHlFNQGo7kTVPJTsT17ZhFBXPa/contact" class="pageclip-form" method="post" style="display: none;"> <input type="name" name="name" value="'+form['name']+'""/><input type="email" name="email" value="'+form['email']+'""/><input type="text" name="subject" value="'+form['subject']+'"/><button type="submit" class="pageclip-form__submit"><span>Send</span></button></form>';
            term.echo($(contact));
            $("#contact-form").submit();  
        });
    }, about: function() {
       var about = '<h1 align="center">Hi ðŸ‘‹, I\'m Abderrahman HELLAL</h1><h3 align="center">A passionate developer from Algeria</h3><p>- ðŸ”­ Iâ€™m currently working on <a class="title" href="https://abdouhl.pythonanywhere.com/">turn tweet into</a></p><p>- ðŸŒ± Iâ€™m currently learning <b>django</b></p><h3 align="left">Languages and Tools:</h3><p align="left"> <a href="https://www.gnu.org/software/bash/" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/gnu_bash/gnu_bash-icon.svg" alt="bash" width="40" height="40"/> </a> <a href="https://www.w3schools.com/css/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/css3/css3-original-wordmark.svg" alt="css3" width="40" height="40"/> </a> <a href="https://www.djangoproject.com/" target="_blank" rel="noreferrer"> <img src="https://cdn.worldvectorlogo.com/logos/django.svg" alt="django" width="40" height="40"/> </a> <a href="https://git-scm.com/" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/git-scm/git-scm-icon.svg" alt="git" width="40" height="40"/> </a> <a href="https://www.w3.org/html/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/html5/html5-original-wordmark.svg" alt="html5" width="40" height="40"/> </a> <a href="https://gohugo.io/" target="_blank" rel="noreferrer"> <img src="https://api.iconify.design/logos-hugo.svg" alt="hugo" width="40" height="40"/> </a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/javascript/javascript-original.svg" alt="javascript" width="40" height="40"/> </a> <a href="https://www.linux.org/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/linux/linux-original.svg" alt="linux" width="40" height="40"/> </a> <a href="https://www.python.org" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg" alt="python" width="40" height="40"/> </a> <a href="https://www.selenium.dev" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/detain/svg-logos/780f25886640cef088af994181646db2f6b1a3f8/svg/selenium-logo.svg" alt="selenium" width="40" height="40"/> </a> <a href="https://tailwindcss.com/" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/tailwindcss/tailwindcss-icon.svg" alt="tailwind" width="40" height="40"/> </a> </p>';
       this.echo($(about));
    },projects: function() {

    {{ with .Site.GetPage "section" "projects" }}
        var projects = $('<div class="pure-g">{{- range .Pages -}}<div class="image-card pure-u-1  pure-u-md-1-2 pure-u-xl-1-3 pure-u-xxl-1-4" onclick="'+"window.location.href='{{ .Params.link }}';"+'"><div class="image-card2">{{ $img_screen := .Resources.GetMatch "screen.png" }}<img src="{{ $img_screen.Permalink }}" alt="{{ .Title }} image" style="height:200px;margin-right:15px;float: left;" ><div><h3>{{ .Title }}</h3><p>{{ .Params.description }}</p><div><dl><dt>tools</dt>{{ range .Params.tools }}<dd>- {{.}}</dd> {{- end -}}</dl></div></div></div></div>{{- end -}}</div>');
        this.echo(projects);
    {{ end }}
    
    },help: function() {
       $.each( help, function( index ) {
       	term.echo(help[index])
       });
    },read: function(url) {
        var title;
        var content;
    		$.getJSON( url.split("/")[1]+"/index.json", function( data ) {
    		$.each( data, function( index ) {
    			var json_url = data[index]["post"][0] ;
					if(json_url == {{ if .Site.IsServer }}"http://localhost:1313"{{ else }}"https://www.elhellal.com"{{ end }}+url){
						title = data[index]["post"][1] ;
					  content = $.parseHTML(data[index]["post"][2].replaceAll('\n', '')) ;
					  content = content
					  content = content
					  content = content
					  $.each(content, function( index ) {
					  console.log($(this).text());
					  if($(this).not("#text")){
					  console.log(content[index])
						term.echo(content[index]);
						}
						});
					}
				});
    		});
        
        
    },
    posts: function() {

    {{ with .Site.GetPage "section" "posts" }}
        var posts = $('<ul>{{- range .Pages -}}<li><a class="title" href="{{ .Params.externalLink | default .RelPermalink }}">{{ .Title }}</a></li>{{- end -}}</ul>');
        this.echo(posts);
    {{ end }}
    $( ".title" ).click(function(event) {
			event.preventDefault();
			var a_link = $(this).attr( "href" );
			term.exec("read "+a_link, false);
		});
    }
}, {
    greetings: false,
    onInit() {
    	    var title = this.cols() > banner[1].length ? banner.join('\n') : 'Abd Errahmane HELLAL';
    	    title = title + '\n\n' + 'Available commands: [[b;#fff;]posts], [[b;#fff;]projects], [[b;#fff;]about], [[b;#fff;]contact].\nType [[b;#fff;]help] for more info.';
            this.echo(title)
            $('[data-index="0"]').css("text-align","center");
        }
});

 </script>
{{ end }}
